import{r as j,j as s,$ as C,Z as N}from"./index-BoN5T6-R.js";import{A as y}from"./alert-D5I4taup.js";import{B as P}from"./index-B0KVRp8-.js";import{A as F}from"./ActionLink-BfJIqeFM.js";import{u as R,F as B,a as u,C as h,t as k,o as A,s as f,b as q}from"./useTimeOutMessage-Dy6Y6LI1.js";import{P as x}from"./PasswordInput-mgDvkTjG.js";import"./classNames-B625GU31.js";import"./index-t7jTpxbe.js";import"./index-BUAPYiFd.js";const M=A({newPassword:f({required_error:"Please enter your password"}),confirmPassword:f({required_error:"Confirm Password Required"})}).refine(e=>e.newPassword===e.confirmPassword,{message:"Your passwords do not match",path:["confirmPassword"]}),T=e=>{var p,w;const[n,r]=j.useState(!1),{className:i,setMessage:a,setResetComplete:o,resetComplete:l,children:g}=e,{handleSubmit:b,formState:{errors:d},control:c}=R({resolver:k(M)}),v=async t=>{const{newPassword:S}=t;try{await C({password:S})&&(r(!1),o==null||o(!0))}catch(m){a==null||a(typeof m=="string"?m:"Failed to reset password"),r(!1)}r(!1)};return s.jsx("div",{className:i,children:l?s.jsx(s.Fragment,{children:g}):s.jsxs(B,{onSubmit:b(v),children:[s.jsx(u,{label:"Password",invalid:!!d.newPassword,errorMessage:(p=d.newPassword)==null?void 0:p.message,children:s.jsx(h,{name:"newPassword",control:c,render:({field:t})=>s.jsx(x,{placeholder:"••••••••••••",...t})})}),s.jsx(u,{label:"Confirm Password",invalid:!!d.confirmPassword,errorMessage:(w=d.confirmPassword)==null?void 0:w.message,children:s.jsx(h,{name:"confirmPassword",control:c,render:({field:t})=>s.jsx(x,{placeholder:"Confirm Password",...t})})}),s.jsx(P,{variant:"default",type:"submit",children:n?"Submiting...":"Submit"})]})})},Y=({signInUrl:e="/sign-in"})=>{const[n,r]=j.useState(!1),[i,a]=q(),o=N(),l=()=>{o(e)};return s.jsxs("div",{children:[s.jsx("div",{className:"mb-6",children:n?s.jsxs(s.Fragment,{children:[s.jsx("h3",{className:"mb-1",children:"Reset done"}),s.jsx("p",{className:"font-semibold heading-text",children:"Your password has been successfully reset"})]}):s.jsxs(s.Fragment,{children:[s.jsx("h3",{className:"mb-1",children:"Set new password"}),s.jsx("p",{className:"font-semibold heading-text",children:"Your new password must different to previos password"})]})}),i&&s.jsx(y,{children:s.jsx("span",{className:"break-all",children:i})}),s.jsx(T,{resetComplete:n,setMessage:a,setResetComplete:r,children:s.jsx(P,{variant:"default",type:"button",onClick:l,children:"Continue"})}),s.jsxs("div",{className:"mt-4 text-center",children:[s.jsx("span",{children:"Back to "}),s.jsx(F,{to:e,className:"heading-text font-bold",themeColor:!1,children:"Sign in"})]})]})},G=()=>s.jsx(Y,{});export{Y as ResetPasswordBase,G as default};
