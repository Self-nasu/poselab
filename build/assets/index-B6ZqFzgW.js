import{r as P,E as y,j as e,q as F,n as G}from"./index-B-yiBXzM.js";import{A as C}from"./alert-C9PVow5I.js";import{I as T}from"./index-Cs0IGsSJ.js";import{B as u}from"./index-C5YOWs5V.js";import{u as A,F as B,a as b,C as f,t as E,o as q,s as j,b as O,A as w}from"./useTimeOutMessage-C48nxMuN.js";import{P as _}from"./PasswordInput-DEqXdOh5.js";import"./classNames-OB5FZ5g2.js";import"./index-BJANbAFf.js";const H=q({email:j({required_error:"Please enter your email"}).min(1,{message:"Please enter your email"}),password:j({required_error:"Please enter your password"}).min(1,{message:"Please enter your password"})}),D=a=>{var x,p,g;const[o,t]=P.useState(!1),{disableSubmit:i=!1,className:l,setMessage:n,passwordHint:c}=a,{handleSubmit:s,formState:{errors:r},control:m}=A({defaultValues:{email:"admin-01@poselab.in",password:"123Qwe"},resolver:E(H)}),{signIn:N}=y(),S=async d=>{const{email:k,password:I}=d;if(!i){t(!0);const h=await N({email:k,password:I});(h==null?void 0:h.status)==="failed"&&(n==null||n(h.message))}t(!1)};return e.jsx("div",{className:l,children:e.jsxs(B,{onSubmit:s(S),children:[e.jsx(b,{label:"Email",invalid:!!r.email,errorMessage:(x=r.email)==null?void 0:x.message,children:e.jsx(f,{name:"email",control:m,render:({field:d})=>e.jsx(T,{type:"email",placeholder:"Email",autoComplete:"off",...d})})}),e.jsx(b,{label:"Password",invalid:!!r.password,errorMessage:(p=r.password)==null?void 0:p.message,className:F(c?"mb-0":"",(g=r.password)!=null&&g.message?"mb-8":""),children:e.jsx(f,{name:"password",control:m,rules:{required:!0},render:({field:d})=>e.jsx(_,{placeholder:"Password",...d})})}),c,e.jsx(u,{variant:"default",type:"submit",className:"w-full",children:o?"Signing in...":"Sign In"})]})})};async function v(){return new Promise(a=>{setTimeout(()=>{a({token:"placeholder_token",user:{id:"placeholder_id",name:"Placeholder User",email:"user@example.com"}})},500)})}async function L(){return await v()}async function Q(){return await v()}const R=({setMessage:a,disableSubmit:o})=>{const{oAuthSignIn:t}=y(),i=async()=>{o||t(async({redirect:n,onSignIn:c})=>{try{const s=await L();if(s){const{token:r,user:m}=s;c({accessToken:r},m),n()}}catch(s){a==null||a((s==null?void 0:s.toString())||"")}})},l=async()=>{o||t(async({redirect:n,onSignIn:c})=>{try{const s=await Q();if(s){const{token:r,user:m}=s;c({accessToken:r},m),n()}}catch(s){a==null||a((s==null?void 0:s.toString())||"")}})};return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{className:"flex-1 bg-white text-black border shadow-none hover:shadow-sm transition-all border-gray-300 hover:bg-white hover:text-black",type:"button",onClick:i,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("img",{className:"h-[25px] w-[25px]",src:"/img/others/google.png",alt:"Google sign in"}),e.jsx("span",{children:"Google"})]})}),e.jsx(u,{className:"flex-1 bg-white text-black shadow-none hover:shadow-sm transition-all border border-gray-300 hover:bg-white hover:text-black",type:"button",onClick:l,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("img",{className:"h-[25px] w-[25px]",src:"/img/others/github.png",alt:"Google sign in"}),e.jsx("span",{children:"Github"})]})})]})},U=({signUpUrl:a="/sign-up",forgetPasswordUrl:o="/forgot-password",disableSubmit:t})=>{const[i,l]=O();return G(n=>n.mode),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-10",children:[e.jsx("h2",{className:"mb-2",children:"Welcome back!"}),e.jsx("p",{className:"font-semibold heading-text",children:"Please enter your credentials to sign in!"})]}),i&&e.jsx(C,{children:e.jsx("span",{className:"break-all",children:i})}),e.jsx(D,{disableSubmit:t,setMessage:l,passwordHint:e.jsx("div",{className:"mb-7 mt-2",children:e.jsx(w,{to:o,className:"font-semibold heading-text mt-2 underline",themeColor:!1,children:"Forgot password"})})}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-800 flex-1 mt-[1px]"}),e.jsx("p",{className:"font-semibold heading-text",children:"or countinue with"}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-800 flex-1 mt-[1px]"})]}),e.jsx(R,{disableSubmit:t,setMessage:l})]}),e.jsx("div",{children:e.jsxs("div",{className:"mt-6 text-center",children:[e.jsxs("span",{children:["Don't have an account yet?"," "]}),e.jsx(w,{to:a,className:"heading-text font-bold",themeColor:!1,children:"Sign up"})]})})]})},$=()=>e.jsx(U,{});export{U as SignInBase,$ as default};
