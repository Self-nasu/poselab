import{r as l,j as e}from"./index-wHMWyiMA.js";import{U as k,C as b}from"./CharacterViewer-CGBfiGNt.js";import{B as j}from"./index-xPSM5tdS.js";import{C as v}from"./card-BbPOybdj.js";import{c as w}from"./createLucideIcon-xMlg5cgV.js";import"./floating-ui.react-dom-DJeMYU5f.js";import"./index-oGx8cbtY.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],y=w("circle-check-big",N),S=({onSkinUpload:d})=>{const[c,o]=l.useState(!1),[a,u]=l.useState(null),i=l.useRef(null),s=r=>r.type.includes("png")?r.size>5*1024*1024?(alert("File size should be less than 5MB"),!1):!0:(alert("Please upload a PNG file"),!1),p=r=>new Promise((t,f)=>{const n=new Image;n.onload=()=>{if(n.width!==64||n.height!==64){f(new Error("Skin must be 64x64 pixels"));return}t(n)},n.onerror=()=>f(new Error("Failed to load image")),n.src=URL.createObjectURL(r)}),m=async r=>{if(s(r))try{const t=await p(r),f=URL.createObjectURL(r);u({file:r,image:t,preview:f})}catch(t){alert(t instanceof Error?t.message:"Failed to load skin")}},x=r=>{r.preventDefault(),o(!1);const t=Array.from(r.dataTransfer.files);t.length>0&&m(t[0])},g=r=>{const t=r.target.files;t&&t.length>0&&m(t[0])},h=()=>{a&&d(a.file,a.image)};return e.jsxs(v,{className:"w-full p-4 shadow-lg rounded-xl bg-gradient-to-br from-gray-800 via-gray-900 to-gray-950",children:[e.jsx("div",{className:`
      border-2 border-dashed rounded-xl p-6 text-center transition-all cursor-pointer
      ${c?"border-primary bg-primary/10 shadow-lg":"border-border hover:border-primary/50 hover:bg-primary/5"}
    `,onDragOver:r=>{r.preventDefault(),o(!0)},onDragLeave:()=>o(!1),onDrop:x,onClick:()=>{var r;return(r=i.current)==null?void 0:r.click()},children:a?e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-24 h-24 border border-border rounded-lg overflow-hidden bg-gray-900",children:e.jsx("img",{src:a.preview,alt:"Uploaded skin",className:"w-full h-full object-contain pixel-art",style:{imageRendering:"pixelated"}})}),e.jsxs("div",{className:"flex items-center gap-2 text-primary font-semibold",children:[e.jsx(y,{className:"w-5 h-5"})," ",a.file.name]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"64x64 PNG • Ready"})]}):e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(k,{className:"w-10 h-10 text-muted-foreground"}),e.jsx("p",{className:"text-sm text-foreground font-medium",children:"Drop skin or click to upload"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"PNG • 64x64 pixels"})]})}),e.jsx("input",{ref:i,type:"file",accept:".png",className:"hidden",onChange:g}),a&&e.jsx(j,{className:"w-full mt-4 bg-gradient-to-r from-purple-500 via-pink-500 to-red-500 text-white hover:shadow-xl transition-all",size:"sm",onClick:h,children:"Load Skin"})]})},E=()=>{const[d,c]=l.useState(null),[o,a]=l.useState(!1);l.useEffect(()=>{(async()=>{const s=new Image;s.crossOrigin="anonymous",s.src="/skins/default-skin.png",await new Promise((p,m)=>{s.onload=p,s.onerror=m}),c({image:s})})()},[]);const u=(i,s)=>{c({file:i,image:s}),a(!1)};return d?e.jsxs("div",{className:"relative h-[92.2vh] w-full flex flex-col items-center justify-center",children:[e.jsx(b,{skinImage:d.image,onChangeSkinClick:()=>a(!0)}),o&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-2x mx-auto relative",children:[e.jsx("button",{className:"absolute top-4 right-4 text-muted-foreground hover:text-foreground",onClick:()=>a(!1),children:"✕"}),e.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4 text-center",children:"Upload New Skin"}),e.jsx(S,{onSkinUpload:u})]})})]}):null};export{E as default};
