import{r as h,s as E,j as e,a as J,y as K,z as Y,B as N,E as $,F as M,I as _,J as G,K as F,M as Q,L as X}from"./index-iUiVPI1x.js";import{I as j}from"./index-CfhMJDhS.js";import{c as v,B as x}from"./index-wpRX10Ff.js";import{u as ee,F as te,a as w,C as O,t as ae,o as se,s as A,b as re}from"./useTimeOutMessage-B7_kyssU.js";import{P as ne}from"./PasswordInput-zLLkXTnn.js";import{A as ie}from"./ActionLink-CvesMmQZ.js";import"./classNames-CarkrQXt.js";import"./index-Dauiz24F.js";import"./proxy-DIThota5.js";import"./index-D8yoDVd_.js";const oe=se({email:A({required_error:"Please enter your email"}).min(1,{message:"Please enter your email"}),password:A({required_error:"Please enter your password"}).min(1,{message:"Please enter your password"})}),le=n=>{var P,C;const[a,r]=h.useState(!1),[o,l]=h.useState("email"),[i,p]=h.useState(""),[s,u]=h.useState(""),[c,k]=h.useState(null),[S,f]=h.useState(""),{disableSubmit:R=!1,className:B,setMessage:d,passwordHint:I}=n,{handleSubmit:H,formState:{errors:b},control:T}=ee({defaultValues:{email:"",password:""},resolver:ae(oe)}),{signIn:W,oAuthSignIn:D}=E(),L=async t=>{const{email:g,password:y}=t;if(!R){r(!0);const m=await W({email:g,password:y});(m==null?void 0:m.status)==="failed"&&(d==null||d(m.message||"invalid credentials")),r(!1)}},U=async()=>{if(!i){f("Please enter a phone number");return}f(""),r(!0);try{const t=i.startsWith("+91")?i:`+91${i}`,g=await K(t);k(g),d==null||d("OTP Sent!")}catch(t){console.error("Error sending OTP:",t),f(t.message||"Failed to send OTP")}finally{r(!1)}},V=async()=>{if(!(!s||!c)){r(!0);try{const t=await Y(c,s),g=await N(t),y=await $({id_token:g});if(y){const{token:m,user:q}=y;D(({onSignIn:z,redirect:Z})=>{z({accessToken:m},q),Z()})}}catch(t){console.error("Error verifying OTP:",t),f(t.message||"Failed to verify OTP")}finally{r(!1)}}};return e.jsxs("div",{className:v(B,"animate-in fade-in slide-in-from-bottom-4 duration-700"),children:[e.jsxs("div",{className:"flex p-1.5 bg-white/5 border border-white/5 rounded-2xl mb-8",children:[e.jsx("button",{className:v("flex-1 flex items-center justify-center gap-2 py-3 text-xs font-bold tracking-widest uppercase transition-all duration-300 rounded-xl rounded-r-none",o==="email"?"bg-primary text-black shadow-[0_0_20px_rgba(34,197,94,0.3)]":"text-gray-100 hover:text-gray-100"),onClick:()=>l("email"),children:"Email Access"}),e.jsx("button",{className:v("flex-1 flex items-center justify-center gap-2 py-3 text-xs font-bold tracking-widest uppercase transition-all duration-300 rounded-xl rounded-l-none",o==="phone"?"bg-primary text-black shadow-[0_0_20px_rgba(34,197,94,0.3)]":"text-gray-100 hover:text-gray-100"),onClick:()=>l("phone"),children:"Secure SMS"})]}),e.jsx("div",{className:"space-y-6",children:o==="email"?e.jsxs(te,{onSubmit:H(L),children:[e.jsx(w,{label:e.jsx("span",{className:"text-gray-100 text-[10px] font-bold tracking-widest uppercase",children:"Email Address"}),invalid:!!b.email,errorMessage:(P=b.email)==null?void 0:P.message,children:e.jsx(O,{name:"email",control:T,render:({field:t})=>e.jsx(j,{type:"email",className:"h-12 bg-white/5 border-white/10 rounded-xl focus:border-primary/50 text-gray-100 placeholder:text-gray-300/60 transition-all font-medium pr-10",placeholder:"commander@poselab.gg",autoComplete:"off",...t})})}),e.jsx(w,{label:e.jsx("span",{className:"text-gray-100 text-[10px] font-bold tracking-widest uppercase",children:"Secret Password"}),invalid:!!b.password,errorMessage:(C=b.password)==null?void 0:C.message,className:J(I?"mb-0":""),children:e.jsx(O,{name:"password",control:T,rules:{required:!0},render:({field:t})=>e.jsx(ne,{placeholder:"••••••••",...t})})}),e.jsx("div",{className:"flex justify-start",children:I}),e.jsx(x,{variant:"default",type:"submit",className:"w-full h-12 bg-primary hover:bg-primary text-black font-bold rounded-xl shadow-xl shadow-primary/10 transition-all hover:scale-[1.02] active:scale-95 duration-200 mt-4",disabled:a,children:a?"AUTHORIZING...":"SIGN IN TO STUDIO"})]}):e.jsx("div",{className:"space-y-6",children:c?e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(w,{label:e.jsx("span",{className:"text-gray-400 text-[10px] font-bold tracking-widest uppercase",children:"Verification Code"}),children:e.jsx(j,{className:"h-14 text-center text-3xl font-black tracking-[0.5em] bg-white/5 border-white/10 rounded-xl focus:border-primary/50 text-primary placeholder:text-gray-800 transition-all",placeholder:"000000",maxLength:6,value:s,onChange:t=>u(t.target.value)})}),e.jsx(x,{className:"w-full h-12 bg-primary hover:bg-primary text-black font-bold rounded-xl shadow-xl shadow-primary/10 transition-all hover:scale-[1.02] active:scale-95 duration-200",onClick:V,disabled:a,children:a?"VERIFYING...":"COMPLETE AUTHORIZATION"}),e.jsx(x,{variant:"ghost",size:"sm",className:"w-full text-xs text-gray-500 hover:text-white hover:bg-white/5 h-10 rounded-xl font-bold tracking-widest uppercase",onClick:()=>k(null),children:"Change Phone"})]}):e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(w,{label:e.jsx("span",{className:"text-gray-100 text-[10px] font-bold tracking-widest uppercase",children:"Phone "}),invalid:!!S,errorMessage:S,children:e.jsx(j,{placeholder:"10-digit phone number",className:"h-12 bg-white/5 border-white/10 rounded-xl focus:border-primary/50 text-gray-100 placeholder:text-gray-300/60 transition-all font-medium",value:i,onChange:t=>p(t.target.value)})}),e.jsx("div",{id:"recaptcha-container",className:"hidden"}),e.jsx(x,{className:"w-full h-12 bg-primary hover:bg-primary text-black font-bold rounded-xl shadow-xl shadow-primary/10 transition-all hover:scale-[1.02] active:scale-95 duration-200",onClick:U,disabled:a,children:a?"TRANSMITTING OTP...":"SEND SECURE OTP"}),e.jsxs("p",{className:"text-[10px] text-gray-200 text-center uppercase tracking-wider font-medium leading-relaxed",children:["A 6-digit verification code will be sent ",e.jsx("br",{})," to your device via SMS."]})]})})})]})};async function ce(){const n=await M(),a=await N(n),r=await _.fetchDataWithAxios({method:"post",url:G.googleSignIn,data:{login_type_id:1,payload:{id_token:a}}});return F(r)}async function de(){const n=await Q(),a=await N(n),r=await _.fetchDataWithAxios({method:"post",url:G.githubSignIn,data:{login_type_id:2,payload:{id_token:a}}});return F(r)}const me=({setMessage:n,disableSubmit:a})=>{const{oAuthSignIn:r}=E(),o=async()=>{a||r(async({redirect:i,onSignIn:p})=>{try{const s=await ce();if(s){const{token:u,user:c}=s;p({accessToken:u},c),i()}}catch(s){n==null||n((s==null?void 0:s.toString())||"")}})},l=async()=>{a||r(async({redirect:i,onSignIn:p})=>{try{const s=await de();if(s){const{token:u,user:c}=s;p({accessToken:u},c),i()}}catch(s){n==null||n((s==null?void 0:s.toString())||"")}})};return e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(x,{className:"w-full h-12 bg-white/5 border border-white/10 text-gray-100 hover:bg-white/10 hover:border-white/20 shadow-xl transition-all duration-300 rounded-xl px-2 flex items-center justify-center gap-3 group",type:"button",onClick:o,disabled:a,children:[e.jsx("div",{className:"bg-white p-1 rounded-full transition-transform group-hover:scale-110 duration-300",children:e.jsx("img",{className:"h-5 w-5",src:"/img/others/google.png",alt:"Google"})}),e.jsx("span",{className:"font-bold tracking-tight",children:"Google"})]}),e.jsxs(x,{className:"w-full h-12 bg-white/5 border border-white/10 text-gray-100 hover:bg-white/10 hover:border-white/20 shadow-xl transition-all duration-300 rounded-xl px-2 flex items-center justify-center gap-3 group",type:"button",onClick:l,disabled:a,children:[e.jsx("div",{className:"bg-gray-900 p-1 rounded-full border border-white/10 transition-transform group-hover:scale-110 duration-300",children:e.jsx("img",{className:"h-5 w-5 invert",src:"/img/others/github.png",alt:"GitHub"})}),e.jsx("span",{className:"font-bold tracking-tight",children:"GitHub"})]})]})},he=({signUpUrl:n="/sign-up",forgetPasswordUrl:a="/forgot-password",disableSubmit:r})=>{const[o,l]=re();return e.jsxs("div",{className:"animate-in fade-in duration-1000",children:[e.jsxs("div",{className:"mb-10",children:[e.jsxs("div",{className:"flex items-center gap-2 text-primary mb-3 font-bold tracking-[0.3em] text-[10px] uppercase",children:[e.jsx("div",{className:"w-5 h-[2px] bg-primary rounded-full transition-all duration-500 hover:w-10"}),"Access Terminal"]}),e.jsx("h2",{className:"text-4xl font-black text-white mb-2 tracking-tight",children:"Welcome Back"}),e.jsx("p",{className:"text-gray-100 font-medium text-sm",children:"Enter your credentials to access the 3D Studio."})]}),o&&e.jsx("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/20 rounded-xl",children:e.jsxs("span",{className:"text-red-400 text-sm font-bold flex items-center gap-2 italic",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-red-500 rounded-full animate-pulse"}),o]})}),e.jsx(le,{disableSubmit:r,setMessage:l,passwordHint:e.jsx("div",{className:"mt-3 flex justify-end",children:e.jsx(ie,{to:a,className:"text-[10px] font-bold text-gray-300/60 uppercase tracking-widest hover:text-primary transition-colors",themeColor:!1,children:"Forgot Password"})})}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"relative flex items-center justify-center mb-8",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-white/20"})}),e.jsx("span",{className:"relative px-4 bg-gray-950 text-[10px] font-black text-gray-100 uppercase tracking-[0.4em]",children:"Rapid Access"})]}),e.jsx(me,{disableSubmit:r,setMessage:l})]}),e.jsxs("div",{className:"mt-8 pt-4 border-t border-white/20 text-center",children:[e.jsx("span",{className:"text-gray-100 text-xs font-semibold uppercase tracking-widest",children:"New to the studio?"}),e.jsx(X,{to:n,className:"ml-2 text-xs font-black text-primary hover:text-white transition-all uppercase tracking-widest underline decoration-primary/20 underline-offset-4 decoration-2",children:"Create Account"})]})]})},Ne=()=>e.jsx(he,{});export{he as SignInBase,Ne as default};
