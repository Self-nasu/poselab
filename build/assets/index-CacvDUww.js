import{r as x,j as e}from"./index-iUiVPI1x.js";import{B as M,C as Y,M as Ce,a as R,S as ge,U as Re,F as Pe,b as Ie,N as T,c as te,P as re,d as _e,e as ae,L as I,f as _,E as me,V as se,g as Ee,h as he,i as Oe,j as De,k as Be,l as Te,m as Fe,R as He,n as Ge,o as Qe,p as oe,A as $e,q as Ve,r as xe,s as Ye,t as We,G as qe,u as Xe,O as Ze,v as Je,w as Ke,x as et,y as tt,z as rt,D as K,H as at}from"./renderUtils-BAHeynVH.js";import{c as E,a as st,B as fe}from"./index-wpRX10Ff.js";import{c as W}from"./createLucideIcon-BNplLJn_.js";import{D as ie}from"./download-mEVhrulA.js";import{C as ot}from"./card-uUNqEMDg.js";import{A as it}from"./index-Dauiz24F.js";import{m as ne}from"./proxy-DIThota5.js";import"./trash-2-Bi5OjDY8.js";import"./x-D3lxwYp0.js";import"./floating-ui.react-dom-Bd-jVGhq.js";import"./chevron-up-COBmi8we.js";import"./index-CfhMJDhS.js";import"./sparkles-DpL4v74S.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],lt=W("circle-check-big",nt);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],dt=W("cpu",ct);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=[["path",{d:"M2 21V3",key:"1bzk4w"}],["path",{d:"M2 5h18a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2.26",key:"1d64pi"}],["path",{d:"M7 17v3a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1v-3",key:"5hbqbf"}],["circle",{cx:"16",cy:"11",r:"2",key:"qt15rb"}],["circle",{cx:"8",cy:"11",r:"2",key:"ssideg"}]],gt=W("gpu",pt);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],ht=W("smile",mt),xt=({skinImage:r,pose:t})=>{const o=x.useRef(null),i=x.useRef(null),a=x.useRef(null),s=x.useRef(null),l=x.useRef(null),n=x.useRef(null),f=x.useRef(null),b=x.useRef(null),d=x.useRef(null),w=x.useRef(null),h=x.useRef(null);x.useEffect(()=>{const u={head:(t==null?void 0:t.head)||{x:0,y:0,z:0},body:(t==null?void 0:t.body)||{x:0,y:0,z:0},leftUpperArm:(t==null?void 0:t.leftUpperArm)||{x:0,y:0,z:0},leftLowerArm:(t==null?void 0:t.leftLowerArm)||{x:0,y:0,z:0},rightUpperArm:(t==null?void 0:t.rightUpperArm)||{x:0,y:0,z:0},rightLowerArm:(t==null?void 0:t.rightLowerArm)||{x:0,y:0,z:0},leftUpperLeg:(t==null?void 0:t.leftUpperLeg)||{x:0,y:0,z:0},leftLowerLeg:(t==null?void 0:t.leftLowerLeg)||{x:0,y:0,z:0},rightUpperLeg:(t==null?void 0:t.rightUpperLeg)||{x:0,y:0,z:0},rightLowerLeg:(t==null?void 0:t.rightLowerLeg)||{x:0,y:0,z:0}};i.current&&i.current.rotation.set(u.head.x*Math.PI/180,u.head.y*Math.PI/180,u.head.z*Math.PI/180),a.current&&a.current.rotation.set(u.body.x*Math.PI/180,u.body.y*Math.PI/180,u.body.z*Math.PI/180),s.current&&s.current.rotation.set(u.leftUpperArm.x*Math.PI/180,u.leftUpperArm.y*Math.PI/180,u.leftUpperArm.z*Math.PI/180),l.current&&l.current.rotation.set(u.leftLowerArm.x*Math.PI/180,u.leftLowerArm.y*Math.PI/180,u.leftLowerArm.z*Math.PI/180),n.current&&n.current.rotation.set(u.rightUpperArm.x*Math.PI/180,u.rightUpperArm.y*Math.PI/180,u.rightUpperArm.z*Math.PI/180),f.current&&f.current.rotation.set(u.rightLowerArm.x*Math.PI/180,u.rightLowerArm.y*Math.PI/180,u.rightLowerArm.z*Math.PI/180),b.current&&b.current.rotation.set(u.leftUpperLeg.x*Math.PI/180,u.leftUpperLeg.y*Math.PI/180,u.leftUpperLeg.z*Math.PI/180),d.current&&d.current.rotation.set(u.leftLowerLeg.x*Math.PI/180,u.leftLowerLeg.y*Math.PI/180,u.leftLowerLeg.z*Math.PI/180),w.current&&w.current.rotation.set(u.rightUpperLeg.x*Math.PI/180,u.rightUpperLeg.y*Math.PI/180,u.rightUpperLeg.z*Math.PI/180),h.current&&h.current.rotation.set(u.rightLowerLeg.x*Math.PI/180,u.rightLowerLeg.y*Math.PI/180,u.rightLowerLeg.z*Math.PI/180)},[t]);const c=u=>[u.right,u.left,u.top,u.bottom,u.front,u.back].map(([Ue,Se,Z,J])=>{const V=document.createElement("canvas");V.width=Z*4,V.height=J*4;const ee=V.getContext("2d");ee.imageSmoothingEnabled=!1,ee.drawImage(r,Ue,Se,Z,J,0,0,Z*4,J*4);const D=new Y(V);return D.flipY=!0,D.generateMipmaps=!1,D.magFilter=1003,D.minFilter=1003,D.needsUpdate=!0,new Ce({map:D,transparent:!0,alphaTest:.1})}),y=new M(8,8,8),k=new M(8,12,4),N=new M(4,6,4),p=new M(4,6,4),g=new M(4,6,4),v=new M(4,6,4),j=new M(8.5,8.5,8.5),z=new M(8.5,12.5,4.5),P=new M(4.5,6.5,4.5),S=new M(4.5,6.5,4.5),F=new M(4.5,6.5,4.5),H=new M(4.5,6.5,4.5),X=c({right:[0,8,8,8],left:[16,8,8,8],top:[8,0,8,8],bottom:[16,0,8,8],front:[8,8,8,8],back:[24,8,8,8]}),O=c({right:[16,20,4,12],left:[28,20,4,12],top:[20,16,8,4],bottom:[28,16,8,4],front:[20,20,8,12],back:[32,20,8,12]}),G=c({right:[40,26,4,6],left:[48,26,4,6],top:[44,16,4,4],bottom:[48,16,4,4],front:[44,26,4,6],back:[52,26,4,6]}),Q=c({right:[40,20,4,6],left:[48,20,4,6],top:[44,16,4,4],bottom:[44,16,4,4],front:[44,20,4,6],back:[52,20,4,6]}),L=c({right:[32,58,4,6],left:[40,58,4,6],top:[36,48,4,4],bottom:[40,48,4,4],front:[36,58,4,6],back:[44,58,4,6]}),A=c({right:[32,52,4,6],left:[40,52,4,6],top:[36,48,4,4],bottom:[36,48,4,4],front:[36,52,4,6],back:[44,52,4,6]}),U=c({right:[0,26,4,6],left:[8,26,4,6],top:[4,16,4,4],bottom:[8,16,4,4],front:[4,26,4,6],back:[12,26,4,6]}),C=c({right:[0,20,4,6],left:[8,20,4,6],top:[4,16,4,4],bottom:[4,16,4,4],front:[4,20,4,6],back:[12,20,4,6]}),$=c({right:[16,58,4,6],left:[24,58,4,6],top:[20,48,4,4],bottom:[24,48,4,4],front:[20,58,4,6],back:[28,58,4,6]}),ye=c({right:[16,52,4,6],left:[24,52,4,6],top:[20,48,4,4],bottom:[20,48,4,4],front:[20,52,4,6],back:[28,52,4,6]}),be=c({right:[48,8,8,8],left:[32,8,8,8],top:[40,0,8,8],bottom:[48,0,8,8],front:[40,8,8,8],back:[56,8,8,8]}),we=c({right:[16,36,4,12],left:[28,36,4,12],top:[20,32,8,4],bottom:[28,32,8,4],front:[20,36,8,12],back:[32,36,8,12]}),Le=c({right:[40,42,4,6],left:[48,42,4,6],top:[44,32,4,4],bottom:[48,32,4,4],front:[44,42,4,6],back:[52,42,4,6]}),je=c({right:[40,36,4,6],left:[48,36,4,6],top:[44,32,4,4],bottom:[44,32,4,4],front:[44,36,4,6],back:[52,36,4,6]}),ke=c({right:[48,58,4,6],left:[56,58,4,6],top:[52,48,4,4],bottom:[56,48,4,4],front:[52,58,4,6],back:[60,58,4,6]}),ve=c({right:[48,52,4,6],left:[56,52,4,6],top:[52,48,4,4],bottom:[52,48,4,4],front:[52,52,4,6],back:[60,52,4,6]}),Ae=c({right:[0,42,4,6],left:[8,42,4,6],top:[4,32,4,4],bottom:[8,32,4,4],front:[4,42,4,6],back:[12,42,4,6]}),ze=c({right:[0,36,4,6],left:[8,36,4,6],top:[4,32,4,4],bottom:[4,32,4,4],front:[4,36,4,6],back:[12,36,4,6]}),Ne=c({right:[0,58,4,6],left:[8,58,4,6],top:[4,48,4,4],bottom:[8,48,4,4],front:[4,58,4,6],back:[12,58,4,6]}),Me=c({right:[0,52,4,6],left:[8,52,4,6],top:[4,48,4,4],bottom:[4,48,4,4],front:[4,52,4,6],back:[12,52,4,6]});return e.jsxs("group",{ref:o,position:[0,-2,0],scale:.12,children:[e.jsxs("group",{ref:i,position:[0,24,0],children:[e.jsx("mesh",{position:[0,4,0],geometry:y,material:X}),e.jsx("mesh",{position:[0,4,0],geometry:j,material:be})]}),e.jsxs("group",{ref:a,position:[0,24,0],children:[e.jsx("mesh",{position:[0,-6,0],geometry:k,material:O}),e.jsx("mesh",{position:[0,-6,0],geometry:z,material:we})]}),e.jsxs("group",{ref:s,position:[-6,24,0],children:[e.jsx("mesh",{position:[0,-3,0],geometry:N,material:A}),e.jsx("mesh",{position:[0,-3,0],geometry:P,material:ve}),e.jsxs("group",{ref:l,position:[0,-6,0],children:[e.jsx("mesh",{position:[0,-3,0],geometry:p,material:L}),e.jsx("mesh",{position:[0,-3,0],geometry:S,material:ke})]})]}),e.jsxs("group",{ref:n,position:[6,24,0],children:[e.jsx("mesh",{position:[0,-3,0],geometry:N,material:Q}),e.jsx("mesh",{position:[0,-3,0],geometry:P,material:je}),e.jsxs("group",{ref:f,position:[0,-6,0],children:[e.jsx("mesh",{position:[0,-3,0],geometry:p,material:G}),e.jsx("mesh",{position:[0,-3,0],geometry:S,material:Le})]})]}),e.jsxs("group",{ref:b,position:[-2,12,0],children:[e.jsx("mesh",{position:[0,-3,0],geometry:g,material:ye}),e.jsx("mesh",{position:[0,-3,0],geometry:F,material:Me}),e.jsxs("group",{ref:d,position:[0,-6,0],children:[e.jsx("mesh",{position:[0,-3,0],geometry:v,material:$}),e.jsx("mesh",{position:[0,-3,0],geometry:H,material:Ne})]})]}),e.jsxs("group",{ref:w,position:[2,12,0],children:[e.jsx("mesh",{position:[0,-3,0],geometry:g,material:C}),e.jsx("mesh",{position:[0,-3,0],geometry:F,material:ze}),e.jsxs("group",{ref:h,position:[0,-6,0],children:[e.jsx("mesh",{position:[0,-3,0],geometry:v,material:U}),e.jsx("mesh",{position:[0,-3,0],geometry:H,material:Ae})]})]})]})},ft=()=>{const r=new R;r.name="Root";const t=new R;t.name="Body";const o=new R;o.name="Head";const i=new R;i.name="LeftArm_Upper";const a=new R;a.name="LeftArm_Lower";const s=new R;s.name="RightArm_Upper";const l=new R;l.name="RightArm_Lower";const n=new R;n.name="LeftLeg_Upper";const f=new R;f.name="LeftLeg_Lower";const b=new R;b.name="RightLeg_Upper";const d=new R;d.name="RightLeg_Lower",r.add(t),r.add(n),r.add(b),t.add(o),t.add(i),t.add(s),i.add(a),s.add(l),n.add(f),b.add(d),o.position.set(0,12,0),t.position.set(0,22,0),i.position.set(-3,3,0),s.position.set(3,3,0),a.position.set(0,-6,0),l.position.set(0,-6,0),n.position.set(-1,8,0),b.position.set(1,8,0),f.position.set(0,-6,0),d.position.set(0,-6,0);const w=[r,t,o,i,a,s,l,n,f,b,d],h=new ge(w);return{root:r,bones:{body:t,head:o,leftArm:{upper:i,lower:a},rightArm:{upper:s,lower:l},leftLeg:{upper:n,lower:f},rightLeg:{upper:b,lower:d}},skeleton:h}},q=(r,t,o,i,a={w:4,h:12,d:4})=>{const s=new M(a.w,a.h,a.d,1,32,1);s.translate(0,-a.h/2,0);const l=s.attributes.position,n=[],f=[],b=-a.h/2;for(let h=0;h<l.count;h++)l.getY(h)>b?(n.push(0,0,0,0),f.push(1,0,0,0)):(n.push(1,0,0,0),f.push(1,0,0,0));s.setAttribute("skinIndex",new Re(n,4)),s.setAttribute("skinWeight",new Pe(f,4));const d=new Ie(s,i);d.name=r,d.frustumCulled=!1;const w=new ge([t,o]);return d.bind(w),d},ut=(r,t)=>q("LeftArm",r.upper,r.lower,t),yt=(r,t)=>q("RightArm",r.upper,r.lower,t),bt=(r,t)=>q("LeftLeg",r.upper,r.lower,t),wt=(r,t)=>q("RightLeg",r.upper,r.lower,t);function Lt({skinImage:r,pose:t,facial:o}){var y,k,N;const i=x.useRef(null),a=x.useCallback((p,g,v,j)=>{const z=document.createElement("canvas");z.width=v*8,z.height=j*8;const P=z.getContext("2d");P.imageSmoothingEnabled=!1,P.drawImage(r,p,g,v,j,0,0,v*8,j*8);const S=new Y(z);return S.flipY=!0,S.magFilter=T,S.minFilter=T,new te({map:S,transparent:!0})},[r]),s=x.useCallback((p,g,v,j)=>{const z=document.createElement("canvas");z.width=v*8,z.height=j*8;const P=z.getContext("2d");P.imageSmoothingEnabled=!1,P.drawImage(r,p,g,v,j,0,0,v*8,j*8);const S=new Y(z);return S.magFilter=T,new te({map:S,transparent:!0})},[r]),{root:l,bones:n,skeleton:f}=x.useMemo(()=>ft(),[]),b=x.useMemo(()=>{const p=[a(8,8,8,8),a(16,8,8,8),a(8,0,8,8),a(16,0,8,8),a(8,8,8,8),a(24,8,8,8)],g=[a(16,20,4,12),a(28,20,4,12),a(20,16,8,4),a(28,16,8,4),a(20,20,8,12),a(32,20,8,12)],v=[a(44,20,4,12),a(52,20,4,12),a(44,16,4,4),a(48,16,4,4),a(44,20,4,12),a(48,20,4,12)],j=[a(4,20,4,12),a(12,20,4,12),a(4,16,4,4),a(8,16,4,4),a(4,20,4,12),a(8,20,4,12)];return{head:p,body:g,arm:v,leg:j}},[a]),d=x.useMemo(()=>({leftArm:ut(n.leftArm,b.arm),rightArm:yt(n.rightArm,b.arm),leftLeg:bt(n.leftLeg,b.leg),rightLeg:wt(n.rightLeg,b.leg)}),[n,b]),w=x.useMemo(()=>({head:new M(8,8,8),body:new M(8,12,4),eye:new re(8,2),mouth:new re(8,2)}),[]),h=x.useMemo(()=>s(8,12,8,2),[s]),c=x.useMemo(()=>s(8,14,8,2),[s]);return x.useEffect(()=>{const p=_e.degToRad,g={head:(t==null?void 0:t.head)||{x:0,y:0,z:0},body:(t==null?void 0:t.body)||{x:0,y:0,z:0},leftUpperArm:(t==null?void 0:t.leftUpperArm)||{x:0,y:10,z:0,bendAngle:0},rightUpperArm:(t==null?void 0:t.rightUpperArm)||{x:0,y:10,z:0,bendAngle:0},leftUpperLeg:(t==null?void 0:t.leftUpperLeg)||{x:0,y:-10,z:0,bendAngle:0},rightUpperLeg:(t==null?void 0:t.rightUpperLeg)||{x:0,y:-10,z:0,bendAngle:0}};n.body.rotation.set(p(g.body.x),p(g.body.y),p(g.body.z)),n.head.rotation.set(p(g.head.x),p(g.head.y),p(g.head.z)),n.leftArm.upper.rotation.set(p(g.leftUpperArm.x),p(g.leftUpperArm.y),p(g.leftUpperArm.z)),n.leftArm.lower.rotation.set(p(g.leftUpperArm.bendAngle||0),0,0),n.rightArm.upper.rotation.set(p(g.rightUpperArm.x),p(g.rightUpperArm.y),p(g.rightUpperArm.z)),n.rightArm.lower.rotation.set(p(g.rightUpperArm.bendAngle||0),0,0),n.leftLeg.upper.rotation.set(p(g.leftUpperLeg.x),p(g.leftUpperLeg.y),p(g.leftUpperLeg.z)),n.leftLeg.lower.rotation.set(p(g.leftUpperLeg.bendAngle||0),0,0),n.rightLeg.upper.rotation.set(p(g.rightUpperLeg.x),p(g.rightUpperLeg.y),p(g.rightUpperLeg.z)),n.rightLeg.lower.rotation.set(p(g.rightUpperLeg.bendAngle||0),0,0)},[t,n]),e.jsxs("group",{ref:i,scale:.125,position:[0,-2,0],children:[e.jsx("primitive",{object:l}),ae(e.jsx("group",{children:e.jsx("mesh",{geometry:w.body,material:b.body,position:[0,6,0]})}),n.body),ae(e.jsxs("group",{children:[e.jsx("mesh",{geometry:w.head,material:b.head,position:[0,4,0]}),e.jsxs("group",{position:[0,4,0],children:[e.jsx("mesh",{position:[(((y=o==null?void 0:o.eyes)==null?void 0:y.x)||0)*.1,(((k=o==null?void 0:o.eyes)==null?void 0:k.y)||0)*.1,4.05],geometry:w.eye,material:h}),e.jsx("mesh",{position:[0,-2-(((N=o==null?void 0:o.mouth)==null?void 0:N.smile)||0)*.1,4.05],geometry:w.mouth,material:c})]})]}),n.head),e.jsx("primitive",{object:d.leftArm}),e.jsx("primitive",{object:d.rightArm}),e.jsx("primitive",{object:d.leftLeg}),e.jsx("primitive",{object:d.rightLeg})]})}const jt=({pose:r,onPoseChange:t})=>{const o=[{key:"head",label:"Head",color:"text-yellow-400"},{key:"body",label:"Body",color:"text-orange-400"},{key:"leftUpperArm",label:"Left Upper Arm",color:"text-blue-400"},{key:"leftLowerArm",label:"Left Forearm",color:"text-cyan-400"},{key:"rightUpperArm",label:"Right Upper Arm",color:"text-purple-400"},{key:"rightLowerArm",label:"Right Forearm",color:"text-pink-400"},{key:"leftUpperLeg",label:"Left Thigh",color:"text-green-400"},{key:"leftLowerLeg",label:"Left Shin",color:"text-lime-400"},{key:"rightUpperLeg",label:"Right Thigh",color:"text-indigo-400"},{key:"rightLowerLeg",label:"Right Shin",color:"text-violet-400"}],i=[{key:"x",label:"X (Pitch)",color:"text-red-400"},{key:"y",label:"Y (Yaw)",color:"text-green-400"},{key:"z",label:"Z (Roll)",color:"text-blue-400"}];return e.jsxs("div",{children:[e.jsx("h4",{className:"text-[10px] font-bold uppercase tracking-[0.2em] text-gray-500 mb-6",children:"Manual Joint Manipulation"}),e.jsx("div",{className:"space-y-4",children:o.map(a=>e.jsxs("div",{className:"space-y-4 p-4 bg-gray-950/40 rounded-2xl border border-white/5 hover:border-white/10 transition-colors",children:[e.jsx("h4",{className:`text-[10px] font-black uppercase tracking-widest ${a.color}`,children:a.label}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:i.map(s=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(I,{className:`text-[9px] ${s.color} font-black uppercase tracking-tighter`,children:s.label}),e.jsxs("span",{className:"text-[10px] text-gray-400 font-mono bg-black/40 px-1.5 py-0.5 rounded",children:[r.poseConfig[a.key][s.key],"Â°"]})]}),e.jsx(_,{value:[r.poseConfig[a.key][s.key]],onValueChange:([l])=>t(a.key,s.key,l),min:-180,max:180,step:5,className:"w-full"})]},s.key))})]},a.key))}),r.facial&&e.jsxs("div",{className:"mt-8 space-y-4",children:[e.jsx("h4",{className:"text-[10px] font-bold uppercase tracking-[0.2em] text-gray-500 mb-4",children:"Facial Expressions"}),r.facial.eyes&&e.jsxs("div",{className:"space-y-4 p-4 bg-gray-950/40 rounded-2xl border border-white/5 hover:border-white/10 transition-colors",children:[e.jsx("h4",{className:"text-[10px] font-black uppercase tracking-widest text-blue-400",children:"Optical Sensors"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{className:"text-[9px] text-gray-500 font-black uppercase tracking-tighter",children:"Blink Compression"}),e.jsx(_,{value:[r.facial.eyes.blink],min:0,max:1,step:.05,className:"w-full"})]})]}),r.facial.mouth&&e.jsxs("div",{className:"space-y-4 p-4 bg-gray-950/40 rounded-2xl border border-white/5 hover:border-white/10 transition-colors",children:[e.jsx("h4",{className:"text-[10px] font-black uppercase tracking-widest text-pink-400",children:"Mandibular Region"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{className:"text-[9px] text-gray-500 font-black uppercase tracking-tighter",children:"Smile Curvature"}),e.jsx(_,{value:[r.facial.mouth.smile],min:0,max:1,step:.05,className:"w-full"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{className:"text-[9px] text-gray-500 font-black uppercase tracking-tighter",children:"Aperture Scale"}),e.jsx(_,{value:[r.facial.mouth.open],min:0,max:1,step:.05,className:"w-full"})]})]})]})]})},kt=({pose:r,onPoseChange:t})=>{const o=[{key:"head",label:"Head",color:"text-yellow-400"},{key:"body",label:"Body",color:"text-orange-400"},{key:"leftUpperArm",label:"Left Arm",color:"text-blue-400",supportsBend:!0},{key:"rightUpperArm",label:"Right Arm",color:"text-purple-400",supportsBend:!0},{key:"leftUpperLeg",label:"Left Leg",color:"text-green-400",supportsBend:!0},{key:"rightUpperLeg",label:"Right Leg",color:"text-indigo-400",supportsBend:!0}],i=[{key:"x",label:"X (Pitch)",color:"text-red-400"},{key:"y",label:"Y (Yaw)",color:"text-green-400"},{key:"z",label:"Z (Roll)",color:"text-blue-400"}];return e.jsxs("div",{children:[e.jsx("h4",{className:"text-[10px] font-bold uppercase tracking-[0.2em] text-gray-500 mb-6",children:"Cinematic Joint Controls"}),e.jsx("div",{className:"space-y-4",children:o.map(a=>e.jsxs("div",{className:"space-y-4 p-4 bg-gray-950/40 rounded-2xl border border-white/5 hover:border-white/10 transition-colors",children:[e.jsx("h4",{className:`text-[10px] font-black uppercase tracking-widest ${a.color}`,children:a.label}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:i.map(s=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(I,{className:`text-[9px] ${s.color} font-black uppercase tracking-tighter`,children:s.label}),e.jsxs("span",{className:"text-[10px] text-gray-400 font-mono bg-black/40 px-1.5 py-0.5 rounded",children:[r.poseConfig[a.key][s.key],"Â°"]})]}),e.jsx(_,{value:[r.poseConfig[a.key][s.key]],onValueChange:([l])=>t(a.key,s.key,l),min:-180,max:180,step:5,className:"w-full"})]},s.key))}),a.supportsBend&&e.jsxs("div",{className:"mt-2 pt-4 border-t border-white/5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(I,{className:"text-[9px] text-amber-500 font-black uppercase tracking-tighter",children:"Joint Flexion"}),e.jsxs("span",{className:"text-[10px] text-gray-400 font-mono bg-black/40 px-1.5 py-0.5 rounded",children:[r.poseConfig[a.key].bendAngle||0,"Â°"]})]}),e.jsx(_,{value:[r.poseConfig[a.key].bendAngle||0],onValueChange:([s])=>t(a.key,"bendAngle",s),min:0,max:120,step:5,className:"w-full"})]})]},a.key))}),r.facial&&e.jsxs("div",{className:"mt-8 space-y-4",children:[e.jsx("h4",{className:"text-[10px] font-bold uppercase tracking-[0.2em] text-gray-500 mb-4",children:"Facial Expression Engine"}),r.facial.eyes&&e.jsxs("div",{className:"space-y-4 p-4 bg-gray-950/40 rounded-2xl border border-white/5 hover:border-white/10 transition-colors",children:[e.jsx("h4",{className:"text-[10px] font-black uppercase tracking-widest text-blue-400",children:"Optical Sensors"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{className:"text-[9px] text-gray-500 font-black uppercase tracking-tighter",children:"Blink Compression"}),e.jsx(_,{value:[r.facial.eyes.blink],min:0,max:1,step:.05,className:"w-full"})]})]}),r.facial.mouth&&e.jsxs("div",{className:"space-y-4 p-4 bg-gray-950/40 rounded-2xl border border-white/5 hover:border-white/10 transition-colors",children:[e.jsx("h4",{className:"text-[10px] font-black uppercase tracking-widest text-pink-400",children:"Mandibular Data"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{className:"text-[9px] text-gray-500 font-black uppercase tracking-tighter",children:"Smile Curvature"}),e.jsx(_,{value:[r.facial.mouth.smile],min:0,max:1,step:.05,className:"w-full"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{className:"text-[9px] text-gray-500 font-black uppercase tracking-tighter",children:"Aperture Scale"}),e.jsx(_,{value:[r.facial.mouth.open],min:0,max:1,step:.05,className:"w-full"})]})]})]})]})},le={standing:{poseConfig:{leftUpperArm:{x:0,y:0,z:0},leftLowerArm:{x:0,y:0,z:0},rightUpperArm:{x:0,y:0,z:0},rightLowerArm:{x:0,y:0,z:0},leftUpperLeg:{x:0,y:0,z:0},leftLowerLeg:{x:0,y:0,z:0},rightUpperLeg:{x:0,y:0,z:0},rightLowerLeg:{x:0,y:0,z:0},head:{x:0,y:0,z:0},body:{x:0,y:0,z:0}},facial:{eyes:{x:0,y:0,blink:0},mouth:{smile:0,open:0},eyebrows:{left:0,right:0}},attachments:{leftHand:{item_code:"sword",offset:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},rightHand:{item_code:"shield",offset:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}}},poseMeta:{name:"Standing",description:"Neutral relaxed pose with both legs straight.",category:"default",tags:["neutral","idle","standing"],isSymmetrical:!0,difficulty:"easy",previewImgUrl:"./poseLabsPose/standing.png"}},walking:{poseConfig:{leftUpperArm:{x:-20,y:0,z:-5},leftLowerArm:{x:-5,y:0,z:5},rightUpperArm:{x:20,y:0,z:5},rightLowerArm:{x:0,y:0,z:0},leftUpperLeg:{x:25,y:0,z:-3},leftLowerLeg:{x:0,y:0,z:0},rightUpperLeg:{x:-25,y:0,z:5},rightLowerLeg:{x:0,y:0,z:0},head:{x:0,y:2,z:5},body:{x:0,y:0,z:0}},facial:{eyes:{x:0,y:0,blink:0},mouth:{smile:0,open:0},eyebrows:{left:0,right:0}},attachments:{leftHand:{item_code:"sword",offset:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},rightHand:{item_code:"shield",offset:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}}},poseMeta:{name:"Walking",description:"A natural stride with swinging arms.",category:"default",tags:["walk","move","stride"],isSymmetrical:!1,difficulty:"easy",previewImgUrl:"./poseLabsPose/walking.png"}},waving:{poseConfig:{leftUpperArm:{x:0,y:0,z:0},leftLowerArm:{x:0,y:0,z:0},rightUpperArm:{x:-80,y:0,z:30},rightLowerArm:{x:-45,y:0,z:15},leftUpperLeg:{x:0,y:0,z:0},leftLowerLeg:{x:0,y:0,z:0},rightUpperLeg:{x:0,y:0,z:0},rightLowerLeg:{x:0,y:0,z:0},head:{x:0,y:15,z:0},body:{x:0,y:0,z:0}},facial:{eyes:{x:0,y:5,blink:0},mouth:{smile:1,open:0},eyebrows:{left:5,right:5}},attachments:{leftHand:{item_code:"",offset:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},rightHand:{item_code:"",offset:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}}},poseMeta:{name:"Waving",description:"Friendly wave with right hand raised.",category:"default",tags:["wave","hello","interaction"],isSymmetrical:!1,difficulty:"medium",previewImgUrl:"./poseLabsPose/waving.png"}},sitting:{poseConfig:{leftUpperArm:{x:0,y:0,z:0},leftLowerArm:{x:-30,y:0,z:0},rightUpperArm:{x:0,y:0,z:0},rightLowerArm:{x:-30,y:0,z:0},leftUpperLeg:{x:-45,y:0,z:0},leftLowerLeg:{x:45,y:0,z:0},rightUpperLeg:{x:-45,y:0,z:0},rightLowerLeg:{x:45,y:0,z:0},head:{x:0,y:0,z:0},body:{x:0,y:0,z:0}},facial:{eyes:{x:0,y:0,blink:0},mouth:{smile:.2,open:0},eyebrows:{left:0,right:0}},attachments:{leftHand:{item_code:"",offset:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},rightHand:{item_code:"",offset:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}}},poseMeta:{name:"Sitting",description:"Character in a relaxed sitting position.",category:"default",tags:["sit","rest","idle"],isSymmetrical:!0,difficulty:"easy",previewImgUrl:"./poseLabsPose/sitting.png"}},running:{poseConfig:{leftUpperArm:{x:-45,y:0,z:0},leftLowerArm:{x:0,y:0,z:0},rightUpperArm:{x:45,y:0,z:0},rightLowerArm:{x:0,y:0,z:0},leftUpperLeg:{x:45,y:0,z:0},leftLowerLeg:{x:0,y:0,z:0},rightUpperLeg:{x:-45,y:0,z:0},rightLowerLeg:{x:0,y:0,z:0},head:{x:5,y:0,z:0},body:{x:5,y:0,z:0}},facial:{eyes:{x:0,y:0,blink:0},mouth:{smile:0,open:.3},eyebrows:{left:0,right:0}},attachments:{leftHand:{item_code:"sword",offset:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},rightHand:{item_code:"",offset:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}}},poseMeta:{name:"Running",description:"Dynamic running motion with forward lean.",category:"default",tags:["run","sprint","motion"],isSymmetrical:!1,difficulty:"medium",previewImgUrl:"./poseLabsPose/running.png"}},combat:{poseConfig:{leftUpperArm:{x:-45,y:30,z:0},leftLowerArm:{x:-90,y:0,z:0},rightUpperArm:{x:-30,y:-45,z:15},rightLowerArm:{x:-60,y:0,z:0},leftUpperLeg:{x:15,y:0,z:0},leftLowerLeg:{x:0,y:0,z:0},rightUpperLeg:{x:-15,y:0,z:0},rightLowerLeg:{x:0,y:0,z:0},head:{x:0,y:-15,z:0},body:{x:0,y:-10,z:0}},facial:{eyes:{x:0,y:-5,blink:0},mouth:{smile:0,open:.2},eyebrows:{left:-5,right:-5}},attachments:{leftHand:{item_code:"shield",offset:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},rightHand:{item_code:"sword",offset:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}}},poseMeta:{name:"Combat Ready",description:"Aggressive stance prepared for battle.",category:"default",tags:["combat","fight","battle"],isSymmetrical:!1,difficulty:"hard",previewImgUrl:"./poseLabsPose/combat.png"}}},vt={standing:{poseConfig:{leftUpperArm:{x:0,y:0,z:0,bendAngle:0},rightUpperArm:{x:0,y:0,z:0,bendAngle:0},leftUpperLeg:{x:0,y:0,z:0,bendAngle:0},rightUpperLeg:{x:0,y:0,z:0,bendAngle:0},head:{x:0,y:0,z:0},body:{x:0,y:0,z:0}},facial:{eyes:{x:0,y:0,blink:0},mouth:{smile:0,open:0},eyebrows:{left:0,right:0}},attachments:{leftHand:{item_code:"",offset:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},rightHand:{item_code:"",offset:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}}},poseMeta:{name:"Standing (Bendable)",description:"Neutral relaxed standing pose for bendable model.",category:"Bendable",tags:["neutral","idle","standing","bendable"],isSymmetrical:!0,difficulty:"easy",previewImgUrl:"./poseLabsPose/standing.png"}},reaching:{poseConfig:{leftUpperArm:{x:0,y:0,z:0,bendAngle:0},rightUpperArm:{x:-120,y:20,z:10,bendAngle:60},leftUpperLeg:{x:0,y:0,z:0,bendAngle:0},rightUpperLeg:{x:0,y:0,z:0,bendAngle:0},head:{x:-10,y:15,z:0},body:{x:0,y:5,z:0}},facial:{eyes:{x:0,y:2,blink:0},mouth:{smile:.3,open:0},eyebrows:{left:3,right:3}},attachments:{leftHand:{item_code:"",offset:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},rightHand:{item_code:"",offset:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}}},poseMeta:{name:"Reaching Up",description:"Smooth arm reaching upward with natural elbow bend.",category:"Bendable",tags:["reach","smooth","bendable"],isSymmetrical:!1,difficulty:"medium",previewImgUrl:"./poseLabsPose/reaching.png"}},crouching:{poseConfig:{leftUpperArm:{x:20,y:-10,z:-5,bendAngle:30},rightUpperArm:{x:20,y:10,z:5,bendAngle:30},leftUpperLeg:{x:-70,y:-5,z:0,bendAngle:80},rightUpperLeg:{x:-70,y:5,z:0,bendAngle:80},head:{x:15,y:0,z:0},body:{x:10,y:0,z:0}},facial:{eyes:{x:0,y:-2,blink:0},mouth:{smile:0,open:.1},eyebrows:{left:-2,right:-2}},attachments:{leftHand:{item_code:"",offset:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},rightHand:{item_code:"",offset:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}}},poseMeta:{name:"Crouching",description:"Deep crouch with smooth knee bends.",category:"Bendable",tags:["crouch","sneak","bendable"],isSymmetrical:!0,difficulty:"medium",previewImgUrl:"./poseLabsPose/crouching.png"}},throwing:{poseConfig:{leftUpperArm:{x:-30,y:-15,z:-10,bendAngle:20},rightUpperArm:{x:-100,y:45,z:80,bendAngle:90},leftUpperLeg:{x:25,y:0,z:-5,bendAngle:15},rightUpperLeg:{x:-35,y:0,z:5,bendAngle:25},head:{x:10,y:25,z:0},body:{x:5,y:20,z:10}},facial:{eyes:{x:0,y:3,blink:0},mouth:{smile:0,open:.4},eyebrows:{left:5,right:5}},attachments:{leftHand:{item_code:"",offset:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},rightHand:{item_code:"snowball",offset:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}}},poseMeta:{name:"Throwing",description:"Dynamic throwing motion with natural arm wind-up.",category:"Bendable",tags:["throw","action","bendable"],isSymmetrical:!1,difficulty:"hard",previewImgUrl:"./poseLabsPose/throwing.png"}}},At=8,ce=12,zt=4,Nt=r=>{var a;const t={name:"body",size:[At,ce,zt],pivot:[0,-ce/2,0],position:[0,12,0],textureOffset:[16,16],children:[]},o={name:"head",size:[8,8,8],pivot:[0,-4,0],position:[0,12,0],textureOffset:[0,0]};(a=t.children)==null||a.push(o);const i=(s,l,n)=>{var k,N,p;const f=n==="arm",b=l==="left"?-1:1,d=f?12:0,h=b*(f?6:2);let c=0,y=0;if(f?l==="right"?(c=40,y=16):(c=32,y=48):l==="right"?(c=0,y=16):(c=16,y=48),r){const g=`${l}Upper${f?"Arm":"Leg"}`,v=`${l}Lower${f?"Arm":"Leg"}`,j={name:g,size:[4,8,4],pivot:[0,4,0],position:[h,d,0],textureOffset:[c,y],children:[]},z={name:v,size:[4,8,4],pivot:[0,3,0],position:[0,-6.5,-.2],textureOffset:[c,y+4]};(N=j.children)==null||N.push(z),(p=t.children)==null||p.push(j)}else{const g={name:`${l}${f?"Arm":"Leg"}`,size:[4,12,4],pivot:[0,6,0],position:[h,d,0],textureOffset:[c,y]};(k=t.children)==null||k.push(g)}};return i("leftArm","left","arm"),i("rightArm","right","arm"),i("leftLeg","left","leg"),i("rightLeg","right","leg"),{root:[t]}},ue=({config:r,rigState:t,materialFactory:o})=>{const{name:i,size:a,pivot:s,position:l,children:n}=r,[f,b,d]=a,w=t.rotations[i]||new me(0,0,0),h=x.useMemo(()=>new M(f,b,d),[f,b,d]),c=x.useMemo(()=>o(r),[r,o]);return e.jsxs("group",{position:new se(...l),rotation:w,children:[e.jsx("mesh",{geometry:h,material:c,position:new se(-s[0],-s[1],-s[2]),castShadow:!0,receiveShadow:!0}),n==null?void 0:n.map(y=>e.jsx(ue,{config:y,rigState:t,materialFactory:o},y.name))]})},Mt=({definition:r,pose:t,materialFactory:o})=>{const{root:i}=r;return e.jsx("group",{children:i.map(a=>e.jsx(ue,{config:a,rigState:t,materialFactory:o},a.name))})},Ut=({skinImage:r,pose:t,bendable:o=!1})=>{const i=x.useMemo(()=>Nt(o),[o]),a=x.useMemo(()=>s=>{const[l,n]=s.textureOffset,[f,b,d]=s.size;return[{name:"right",rect:[l,n+d,d,b]},{name:"left",rect:[l+d+f,n+d,d,b]},{name:"top",rect:[l+d,n,f,d]},{name:"bottom",rect:[l+d+f,n,f,d]},{name:"front",rect:[l+d,n+d,f,b]},{name:"back",rect:[l+d+f+d,n+d,f,b]}].map(h=>{const[c,y,k,N]=h.rect,p=document.createElement("canvas"),g=4;p.width=k*g,p.height=N*g;const v=p.getContext("2d");v&&(v.imageSmoothingEnabled=!1,r?v.drawImage(r,c,y,k,N,0,0,k*g,N*g):(v.fillStyle="#777",v.fillRect(0,0,p.width,p.height)));const j=new Y(p);return j.colorSpace=Ee,j.magFilter=T,j.minFilter=T,j.generateMipmaps=!1,j.flipY=!0,new he({map:j,transparent:!0,alphaTest:.1,roughness:.9,metalness:0})})},[r]);return e.jsx("group",{scale:.12,position:[0,-2,0],children:e.jsx(Mt,{definition:i,pose:t,materialFactory:a})})},m=(r,t,o)=>new me(r*Math.PI/180,t*Math.PI/180,o*Math.PI/180),St={standing:{poseMeta:{name:"Standing"},poseConfig:{rotations:{head:m(0,0,0),body:m(0,0,0),leftArm:m(0,0,0),rightArm:m(0,0,0),leftLeg:m(0,0,0),rightLeg:m(0,0,0)}}},walking:{poseMeta:{name:"Walking"},poseConfig:{rotations:{head:m(0,0,0),body:m(0,0,0),leftArm:m(-20,0,0),rightArm:m(20,0,0),leftLeg:m(20,0,0),rightLeg:m(-20,0,0)}}},zombie:{poseMeta:{name:"Zombie"},poseConfig:{rotations:{head:m(-10,0,0),body:m(0,0,0),leftArm:m(-90,0,0),rightArm:m(-90,0,0),leftLeg:m(0,0,0),rightLeg:m(0,0,0)}}}},Ct={standing:{poseMeta:{name:"Standing"},poseConfig:{rotations:{head:m(0,0,0),body:m(0,0,0),leftUpperArm:m(0,0,0),leftLowerArm:m(0,0,0),rightUpperArm:m(0,0,0),rightLowerArm:m(0,0,0),leftUpperLeg:m(0,0,0),leftLowerLeg:m(0,0,0),rightUpperLeg:m(0,0,0),rightLowerLeg:m(0,0,0)}}},walking:{poseMeta:{name:"Walking"},poseConfig:{rotations:{head:m(0,0,0),body:m(0,0,0),leftUpperArm:m(-20,0,0),leftLowerArm:m(-10,0,0),rightUpperArm:m(20,0,0),rightLowerArm:m(-10,0,0),leftUpperLeg:m(20,0,0),leftLowerLeg:m(10,0,0),rightUpperLeg:m(-20,0,0),rightLowerLeg:m(10,0,0)}}},running:{poseMeta:{name:"Running"},poseConfig:{rotations:{head:m(0,0,0),body:m(10,0,0),leftUpperArm:m(-60,0,0),leftLowerArm:m(-60,0,0),rightUpperArm:m(60,0,0),rightLowerArm:m(-60,0,0),leftUpperLeg:m(70,0,0),leftLowerLeg:m(20,0,0),rightUpperLeg:m(-50,0,0),rightLowerLeg:m(10,0,0)}}}},Rt=st("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function de({className:r,variant:t,...o}){return e.jsx("div",{className:E(Rt({variant:t}),r),...o})}const Pt={low:"Optimized for low-end devices and mobile",medium:"Balanced quality and performance",high:"Enhanced visuals for desktop",ultra:"Maximum quality for high-end GPUs"},It={low:"ðŸ“±",medium:"ðŸ’»",high:"ðŸ–¥ï¸",ultra:"ðŸš€"},_t=({quality:r,autoDetectedQuality:t,isUserOverride:o,onQualityChange:i,onResetToAuto:a,fps:s})=>e.jsx("div",{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("h4",{className:"font-semibold text-white",children:"Quality Settings"})}),s!==void 0&&e.jsxs(de,{className:"bg-primary text-black font-bold h-6",variant:"default",children:[Math.round(s)," FPS"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(I,{className:"text-[10px] font-bold uppercase tracking-widest text-gray-500",children:"Rendering Quality"}),o&&e.jsx(de,{variant:"outline",className:"text-[10px] bg-white/5 border-white/10 text-primary",children:"Manual"})]}),e.jsxs(Oe,{value:r,onValueChange:l=>i(l),children:[e.jsx(De,{className:"bg-gray-900 border-white/10 text-white h-12 rounded-xl",children:e.jsx(Be,{})}),e.jsx(Te,{className:"bg-gray-900 border-white/10 text-white rounded-xl shadow-2xl",children:["low","medium","high","ultra"].map(l=>e.jsx(Fe,{value:l,className:"focus:bg-white/10 focus:text-white cursor-pointer py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-lg",children:It[l]}),e.jsx("span",{className:"capitalize font-medium",children:l}),l===t&&e.jsx(dt,{className:"w-3.5 h-3.5 text-primary"})]})},l))})]}),e.jsx("p",{className:"text-[10px] font-medium text-gray-500 italic leading-relaxed",children:Pt[r]})]}),o&&e.jsxs(fe,{variant:"outline",size:"sm",onClick:a,className:"w-full h-10 rounded-xl flex items-center gap-2 bg-white/5 border-white/5 hover:border-primary/50 text-gray-400 hover:text-white transition-all font-bold text-[10px] uppercase tracking-widest",children:[e.jsx(He,{className:"w-3 h-3"}),"Reset to Auto (",t,")"]}),e.jsx("div",{className:"pt-4 border-t border-white/5",children:e.jsxs("div",{className:"text-[10px] font-bold tracking-widest text-gray-600 uppercase space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Auto-detected"}),e.jsx("span",{className:"text-gray-400 bg-white/5 px-2 py-0.5 rounded uppercase",children:t})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Active Profile"}),e.jsx("span",{className:"text-primary bg-primary/10 px-2 py-0.5 rounded uppercase",children:r})]})]})})]})}),Et={low:{shadowMapSize:512,shadowType:"basic",shadowBias:-.001,shadowNormalBias:.05,antialias:!1,pixelRatio:1,toneMapping:!1,toneMappingExposure:1,postProcessing:!1,bloom:!1,ssao:!1,dof:!1,maxLights:2,envMapIntensity:.3,textureAnisotropy:1,lodDistances:[0,5,10]},medium:{shadowMapSize:1024,shadowType:"pcf",shadowBias:-5e-4,shadowNormalBias:.03,antialias:!0,pixelRatio:Math.min(window.devicePixelRatio,1.5),toneMapping:!0,toneMappingExposure:1,postProcessing:!0,bloom:!0,ssao:!1,dof:!1,maxLights:4,envMapIntensity:.6,textureAnisotropy:4,lodDistances:[0,10,20]},high:{shadowMapSize:2048,shadowType:"pcfSoft",shadowBias:-1e-4,shadowNormalBias:.02,antialias:!0,pixelRatio:Math.min(window.devicePixelRatio,2),toneMapping:!0,toneMappingExposure:1.2,postProcessing:!0,bloom:!0,ssao:!0,dof:!1,maxLights:8,envMapIntensity:1,textureAnisotropy:8,lodDistances:[0,15,30]},ultra:{shadowMapSize:4096,shadowType:"pcfSoft",shadowBias:-5e-5,shadowNormalBias:.01,antialias:!0,pixelRatio:Math.min(window.devicePixelRatio,2),toneMapping:!0,toneMappingExposure:1.2,postProcessing:!0,bloom:!0,ssao:!0,dof:!0,maxLights:16,envMapIntensity:1.2,textureAnisotropy:16,lodDistances:[0,20,40]}},Ot=r=>Et[r],Dt=()=>{const[r,t]=x.useState("medium"),[o,i]=x.useState(null),[a,s]=x.useState(60);return x.useEffect(()=>{const w=(()=>{var z;const c=document.createElement("canvas"),y=c.getContext("webgl2")||c.getContext("webgl");if(!y)return"low";const k=y.getParameter(y.RENDERER),N=y.getParameter(y.VENDOR),p=y.getParameter(y.MAX_TEXTURE_SIZE),g=((z=performance.memory)==null?void 0:z.jsHeapSizeLimit)||0,v=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),j=/NVIDIA|GeForce RTX|Radeon RX|Apple M[0-9]|Metal/i.test(k+N);return v?g>2e9?"medium":"low":j&&p>=16384&&g>4e9?"ultra":p>=8192&&g>4e9?"high":p>=4096&&g>2e9?"medium":"low"})();t(w);const h=localStorage.getItem("userQualityPreference");h&&i(h)},[]),{quality:o||r,autoDetectedQuality:r,isUserOverride:o!==null,setQuality:d=>{i(d),localStorage.setItem("userQualityPreference",d)},resetToAuto:()=>{i(null),localStorage.removeItem("userQualityPreference")},fps:a,updateFPS:d=>{s(d)}}},B=(r,t)=>{r.generateMipmaps=!0,r.minFilter=Ge,r.magFilter=Qe,t&&(r.anisotropy=t.textureAnisotropy),r.wrapS=oe,r.wrapT=oe,r.needsUpdate=!0},Bt=(r,t,o)=>{r.traverse(i=>{if(i.isMesh){const s=i.material;Array.isArray(s)?s.forEach(l=>pe(l,t,o)):pe(s,t,o)}})},pe=(r,t,o)=>{r instanceof he&&(r.map&&B(r.map,o),r.normalMap&&B(r.normalMap,o),r.roughnessMap&&B(r.roughnessMap,o),r.metalnessMap&&B(r.metalnessMap,o),r.aoMap&&B(r.aoMap,o),r.needsUpdate=!0)},Tt=({skinImage:r,onChangeSkinClick:t,pose:o})=>{const[i,a]=x.useState("default"),s=i==="default"?le:i==="bendable"?vt:i==="new_rigid"?St:Ct,l=s.standing||Object.values(s)[0],[n,f]=x.useState(o||l),[b,d]=x.useState("standing"),[w,h]=x.useState(null),c=x.useRef(null),y=x.useRef(null),k=x.useRef(null),[N,p]=x.useState(!1),[g,v]=x.useState([{id:"light-1",type:"directional",position:[10,10,5],color:"#ffffff",intensity:1.2},{id:"light-2",type:"directional",position:[-10,5,-5],color:"#ffffff",intensity:.3}]),j=Dt(),z=Ot(j.quality);x.useEffect(()=>{y.current&&Bt(y.current,void 0,z)},[z]);const P=L=>{var C;if(L===i)return;const A=le,U=A.standing||Object.values(A)[0];a(L),f(U),d("standing"),K(`Switched to ${((C=U.poseMeta)==null?void 0:C.name)||"Default"} for ${L} model`)},S=(L,A,U)=>{f(C=>({...C,poseConfig:{...C.poseConfig,[L]:{...C.poseConfig[L],[A]:U}}})),d("custom")},F=L=>{f(s[L]),d(L)},H=()=>{const L=c.current;if(!L)return K.error("Canvas not found");const A=document.createElement("a");A.download="minecraft-character.png",A.href=L.toDataURL("image/png"),A.click(),K.success("Screenshot saved!")},X=async(L,A)=>{if(!y.current||!k.current)throw new Error("Scene not ready");return await at(y.current,k.current,L,A)},O=({icon:L,label:A,active:U,onClick:C})=>e.jsxs("button",{onClick:C,className:E("flex flex-col items-center gap-1 group transition-all duration-200",U?"text-blue-400":"text-gray-500 hover:text-gray-300"),children:[e.jsx("div",{className:E("p-3 rounded-xl transition-all duration-200",U?"bg-blue-500/10 shadow-[0_0_15px_rgba(59,130,246,0.3)] ring-1 ring-blue-500/50":"group-hover:bg-white/5"),children:e.jsx(L,{className:"w-6 h-6"})}),e.jsx("span",{className:"text-[10px] font-bold tracking-widest",children:A})]}),G=({label:L,children:A})=>e.jsxs("div",{className:"flex flex-col items-center px-6 border-r border-white/5 last:border-0 gap-3",children:[e.jsx("span",{className:"text-[10px] font-bold tracking-widest text-gray-500",children:L}),e.jsx("div",{className:"flex gap-2",children:A})]}),Q=({icon:L,active:A,onClick:U})=>e.jsx("button",{onClick:U,className:E("p-2 rounded-lg border transition-all duration-200",A?"bg-blue-500/10 border-blue-500/50 text-blue-400":"bg-white/5 border-white/5 text-gray-400 hover:border-white/20 hover:text-white"),children:e.jsx(L,{className:"w-4 h-4"})});return e.jsxs("div",{className:"relative w-full flex overflow-hidden text-white font-sans",style:{backgroundColor:"#020202"},children:[e.jsxs("aside",{className:"w-24 min-h-[calc(100vh-12rem)] border-r border-white/5 flex flex-col items-center py-8 gap-10 bg-gray-900",children:[e.jsx(O,{icon:$e,label:"POSE",active:w==="poses"||w==="poseControls",onClick:()=>h(w==="poses"?"poseControls":"poses")}),e.jsx(O,{icon:ht,label:"FACE",active:w==="expressions",onClick:()=>h("expressions")}),e.jsx(O,{icon:Ve,label:"LIGHT",active:w==="lighting",onClick:()=>h("lighting")}),e.jsx(O,{icon:gt,label:"GFX",active:w==="quality",onClick:()=>h("quality")}),e.jsxs("div",{className:"mt-auto flex flex-col gap-6 items-center",children:[e.jsx("button",{className:"text-gray-500 hover:text-white transition-colors",onClick:()=>p(!0),children:e.jsx(ie,{className:"w-5 h-5"})}),e.jsx("button",{className:"text-gray-500 hover:text-red-400 transition-colors",onClick:L=>t(L.currentTarget),children:e.jsx(xe,{className:"w-5 h-5"})})]})]}),e.jsxs("main",{className:"flex-1 relative flex flex-col",style:{backgroundColor:"#020202"},children:[e.jsx("div",{className:"absolute top-8 left-10 z-50 flex items-center gap-3",children:e.jsxs("div",{className:"flex items-center gap-3 px-5 py-2.5 bg-gray-900/40 border border-white/10 rounded-2xl backdrop-blur-2xl shadow-[0_0_40px_rgba(0,0,0,0.3)]",children:[e.jsx("span",{className:"text-[10px] font-black text-blue-500 uppercase tracking-[0.2em] animate-pulse",children:"PoseLab.gg"}),e.jsx("span",{className:"text-xs text-gray-600",children:"/"}),e.jsx("span",{className:"text-[10px] font-black text-white uppercase tracking-widest bg-white/10 px-2 py-0.5 rounded",children:"Pose Editor"})]})}),e.jsxs("div",{className:"h-full relative overflow-hidden",style:{backgroundColor:"#020202"},children:[e.jsx("div",{className:"absolute top-[-20%] left-[-20%] w-[60%] h-[60%] bg-blue-600/20 blur-[140px] rounded-full z-0 opacity-80"}),e.jsx("div",{className:"absolute bottom-[-20%] right-[-20%] w-[60%] h-[60%] bg-purple-600/20 blur-[140px] rounded-full z-0 opacity-80"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[40%] h-[40%] bg-primary/5 blur-[100px] rounded-full z-0"}),e.jsxs(Ye,{ref:c,camera:{position:[0,2,12],fov:45},gl:{preserveDrawingBuffer:!0,antialias:!0,alpha:!0},className:"z-10 relative",onCreated:({scene:L,camera:A})=>{y.current=L,k.current=A},children:[e.jsx("ambientLight",{intensity:1.2}),e.jsx(We,{lights:g}),e.jsx(qe,{alignment:"bottom-left",margin:[80,80],children:e.jsx(Xe,{axisColors:["#ff3653","#8adb00","#2c8fff"],labelColor:"white"})}),e.jsx(x.Suspense,{fallback:null,children:i==="default"?e.jsx(xt,{skinImage:r,pose:n.poseConfig}):i==="bendable"?e.jsx(Lt,{skinImage:r,pose:n.poseConfig,facial:n.facial}):e.jsx(Ut,{skinImage:r,pose:n.poseConfig,bendable:i==="new_bendable"})}),e.jsx(Ze,{enablePan:!0,enableZoom:!0,enableRotate:!0}),e.jsx(Je,{preset:"sunset"})]})]}),e.jsxs("div",{className:"flex absolute right-5 top-5 items-center z-10 bg-gray-800/40 border border-white/5 rounded-2xl p-2 px-4 shadow-2xl backdrop-blur-xl",children:[e.jsx(G,{label:"MODEL",children:e.jsx("button",{onClick:()=>P("default"),className:E("px-3 py-1.5 rounded-lg text-[10px] font-bold tracking-widest transition-all duration-200 border",i==="default"?"bg-blue-500/10 border-blue-500/50 text-blue-400":"bg-white/5 border-white/5 text-gray-400 hover:border-white/20"),children:"STANDARD"})}),e.jsxs(G,{label:"UTILITY",children:[e.jsx(Q,{icon:Ke,onClick:H}),e.jsx(Q,{icon:ie,onClick:()=>p(!0)})]})]}),e.jsxs("div",{className:E("fixed top-6 bottom-38 right-6 z-30 w-80 bg-gray-900/95 border border-white/10 rounded-3xl backdrop-blur-2xl shadow-2xl transition-all duration-500 ease-in-out p-6 overflow-hidden flex flex-col",w?"translate-x-0 opacity-100":"translate-x-[120%] opacity-0"),children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h4",{className:"text-xs font-bold tracking-widest text-white uppercase italic",children:w}),e.jsx("button",{onClick:()=>h(null),className:"text-gray-500 hover:text-white",children:e.jsx(et,{className:"w-4 h-4 rotate-180"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto pr-2 custom-scrollbar",children:[w==="quality"&&e.jsx(_t,{quality:j.quality,autoDetectedQuality:j.autoDetectedQuality,isUserOverride:j.isUserOverride,onQualityChange:j.setQuality,onResetToAuto:j.resetToAuto,fps:j.fps}),w==="lighting"&&e.jsx(tt,{lights:g,onLightsChange:v}),w==="poses"&&e.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(s).map(([L,A])=>{var U,C,$;return e.jsxs("button",{onClick:()=>F(L),className:E("group relative aspect-square rounded-2xl border transition-all overflow-hidden",b===L?"border-blue-500 ring-4 ring-blue-500/20":"border-white/5 hover:border-white/20"),children:[e.jsx("img",{src:((U=A.poseMeta)==null?void 0:U.previewImgUrl)||"./poseLabsPose/placeholder-pose.png",alt:((C=A.poseMeta)==null?void 0:C.name)||L,className:"w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all duration-500"}),e.jsx("div",{className:"absolute inset-x-0 bottom-0 p-2 bg-gradient-to-t from-black/80 to-transparent",children:e.jsx("p",{className:"text-[10px] font-bold text-white truncate",children:(($=A.poseMeta)==null?void 0:$.name)||L})})]},L)})}),w==="poseControls"&&(i==="default"?e.jsx(jt,{pose:n,onPoseChange:S}):e.jsx(kt,{pose:n,onPoseChange:S}))]})]})]}),e.jsx(rt,{open:N,onOpenChange:p,onRender:X}),e.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.1); border-radius: 10px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(255, 255, 255, 0.2); }
      `})]})},Ft=({onSkinUpload:r})=>{const[t,o]=x.useState(!1),[i,a]=x.useState(null),s=x.useRef(null),l=h=>h.type.includes("png")?h.size>5*1024*1024?(alert("File size should be less than 5MB"),!1):!0:(alert("Please upload a PNG file"),!1),n=h=>new Promise((c,y)=>{const k=new Image;k.onload=()=>{if(k.width!==64||k.height!==64){y(new Error("Skin must be 64x64 pixels"));return}c(k)},k.onerror=()=>y(new Error("Failed to load image")),k.src=URL.createObjectURL(h)}),f=async h=>{if(l(h))try{const c=await n(h),y=URL.createObjectURL(h);a({file:h,image:c,preview:y})}catch(c){alert(c instanceof Error?c.message:"Failed to load skin")}},b=h=>{h.preventDefault(),o(!1);const c=Array.from(h.dataTransfer.files);c.length>0&&f(c[0])},d=h=>{const c=h.target.files;c&&c.length>0&&f(c[0])},w=()=>{i&&r(i.file,i.image)};return e.jsxs(ot,{className:"w-full border-0",children:[e.jsx("div",{className:`
          border-2 border-dashed rounded-2xl p-8 text-center transition-all cursor-pointer group
          ${t?"border-primary bg-primary/5 shadow-[0_0_20px_rgba(59,130,246,0.1)]":"border-white/5 bg-[#0a0a0c]/40 hover:border-primary/40 hover:bg-primary/[0.02]"}
        `,onDragOver:h=>{h.preventDefault(),o(!0)},onDragLeave:()=>o(!1),onDrop:b,onClick:()=>{var h;return(h=s.current)==null?void 0:h.click()},children:i?e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-24 h-24 border border-white/10 rounded-xl overflow-hidden bg-black/40 p-2 shadow-inner",children:e.jsx("img",{src:i.preview,alt:"Uploaded skin",className:"w-full h-full object-contain pixel-art",style:{imageRendering:"pixelated"}})}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-primary font-black uppercase tracking-widest text-[10px]",children:[e.jsx(lt,{className:"w-4 h-4 fill-primary/10"})," ",i.file.name]}),e.jsx("p",{className:"text-[10px] font-bold text-gray-600 uppercase tracking-tighter",children:"Diagnostic: 64x64 PNG â€¢ Integrity Verified"})]})]}):e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"p-4 rounded-2xl bg-white/5 border border-white/5 group-hover:border-primary/20 group-hover:bg-primary/5 transition-all",children:e.jsx(xe,{className:"w-8 h-8 text-gray-500 group-hover:text-primary transition-colors"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-gray-300 font-black uppercase tracking-widest",children:"Deploy custom appearance"}),e.jsx("p",{className:"text-[10px] text-gray-600 font-bold uppercase tracking-widest",children:"Drop skin or click to browse"})]})]})}),e.jsx("input",{ref:s,type:"file",accept:".png",className:"hidden",onChange:d}),i&&e.jsx(fe,{className:"w-full mt-6 bg-primary hover:bg-white text-black font-black uppercase tracking-[0.2em] text-[10px] h-12 rounded-xl transition-all shadow-lg shadow-primary/20",size:"sm",onClick:w,children:"Initialize Appearance"})]})},rr=()=>{const[r,t]=x.useState(null),[o,i]=x.useState(!1);x.useEffect(()=>{(async()=>{const l=new Image;l.crossOrigin="anonymous",l.src="/skins/default-skin.png",await new Promise((n,f)=>{l.onload=n,l.onerror=f}),t({image:l})})()},[]);const a=(s,l)=>{t({file:s,image:l}),i(!1)};return r?e.jsxs("div",{className:"relative w-full flex flex-col items-center justify-center",children:[e.jsx(Tt,{skinImage:r.image,onChangeSkinClick:()=>i(!0)}),e.jsx(it,{children:o&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx(ne.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>i(!1),className:"absolute inset-0 bg-black/80 backdrop-blur-sm"}),e.jsxs(ne.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:350},className:"bg-gray-900 border border-white/10 p-8 rounded-[2.5rem] shadow-[0_0_100px_rgba(0,0,0,0.5)] mx-auto relative z-10 w-full max-w-md",children:[e.jsx("button",{className:"absolute top-6 right-6 p-2 rounded-full bg-white/5 border border-white/5 text-gray-500 hover:bg-white/10 hover:text-white transition-all",onClick:()=>i(!1),children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h2",{className:"text-3xl font-black text-white tracking-tighter mb-2",children:["Update ",e.jsx("span",{className:"text-primary italic",children:"Skin"})]}),e.jsx("p",{className:"text-gray-500 text-sm font-medium",children:"Select a new PNG asset to deploy to the simulator"})]}),e.jsx(Ft,{onSkinUpload:a})]})]})})]}):null};export{rr as default};
